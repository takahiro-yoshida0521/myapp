{% extends "base.html" %}

{% block title %}マイページ{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/mypage.css') }}">

<h1>{{ user.name }} さんのマイページ</h1>

<div class="profile">
    {% if user.image_filename %}
        <img src="{{ url_for('static', filename='uploads/' + user.image_filename) }}" alt="{{ user.name }}" width="150">
    {% else %}
        <img src="{{ url_for('static', filename='common_img/default.jpg') }}" alt="No Image" width="150">
    {% endif %}
    <p>名前：{{ user.name }}</p>
    <p>年齢：{{ user.age }}歳</p>
</div>

<hr>

<h2>あなたの投稿一覧（{{ posts|length }}件）</h2>
{% if posts %}
    {% for post in posts %}
        <div class="post">
            <p>{{ post.content }}</p>
            <small>{{ post.timestamp.strftime('%Y-%m-%d %H:%M') }}</small>
        </div>
    {% endfor %}
{% else %}
    <p>投稿はまだありません。</p>
{% endif %}

<br>
<div class="button-area">
  <a href="{{ url_for('edit_profile') }}">プロフィールを編集</a>
  <a href="{{ url_for('logout') }}">ログアウト</a>
</div>
{% endblock %}
